<template name="adminAnnouncements">
    <article class="with-tools-sidebar">
        {{>ToolsSidebar}}
        <div class="main">
            <header class="acttitle">
                {{>menu}} {{#if isAdmin}} {{> adminNav}} {{else}}
                <a draggable="false" href="/">
                    <i class="titlereturn fa fa-arrow-left"></i>
                </a>
                {{/if}}
            </header>
            <section>
                <div class="content-user">
                    {{#if isStudent}} Unauthorised access {{else}}
                    <h3 class="center">Add an announcement to the front page for all your students to see. Set how long each announcement will
                        display for, to keep things tidy.</h3>

                    <!-- Make new Announcements with a limit of 30 days. -->

                    <h1>Create new announcement</h1>
                    <div class="announce-limit-msg">Character limit reached</div>
                    <form id="add-user-form">
                        <div class="form-group">
                            <label for="Title">Title</label>
                            <input id="Title" type="text" class="form-control announcement-title-input" name="AnnouncementsTitle" size="20" maxlength="70"
                                required>
                            <div class="announce-limit-msg">Character limit reached</div>
                        </div>
                        <div class="form-group">
                            <label for="Msg">Message</label>
                            <textarea id="Msg" type="text" class="form-control" name="AnnouncementsMsg" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="Expiry">How many days to display (1-30)</label>
                            <input id="Expiry" type="number" min="1" max="30" value="7" class="form-control" name="AnnouncementsExpiry" size="8" required>
                            <div class="announce-error-msg">Please enter a value between 1 and 30</div>
                        </div>
                        <div>
                            <button type="submit" class="button2 buttonsmall" data-function="add-Announcements">Add announcement</button>
                            <button type="button" class="button1 buttonsmall" data-function="clear-form">Clear Form</button>
                        </div>
                    </form>

                    <!-- View current Announcements and be able to edit and delete them -->

                    <h1>Announcements</h1>
                    <span style="margin-bottom:10px">
                        {{#each Announcements}}
                        <!-- {{#if display}} -->
                        <div style="padding:8px;margin-bottom:10px;background-color:#dbe9ff;border-radius: 8px">
                            <div class="text-right">
                                <a draggable="false" href="#" data-function="edit-Announcements">Edit announcement
                                    <i class="fas fa-pencil-alt"></i>
                                </a>
                                <a draggable="false" href="#" data-function="delete-Announcements">delete announcement
                                    <i class="fa fa-trash-alt"></i>
                                </a>
                            </div>
                            <b>{{title}}</b>
                            <div class="forum-post-content">
                                <pre>{{message}}</pre>
                            </div>
                            <div class="text-right">
                                <b>{{getFullnameFromId author}}</b>
                                <i>Posted: {{formatDate date}} {{#if notStudent}}Expires: {{formatDate expiry}}{{/if}} {{#if
                                    isAdmin}}{{orgName organisation}}{{/if}}</i>
                            </div>
                            {{#if edited}}
                            <div class="text-right">
                                <i>Edited By:{{getFullnameFromId editedBy}}</i>
                            </div>
                            {{/if}}

                        </div>
                        <!-- {{/if}} -->
                        {{/each}}
                    </span>

                    <div class="{{editAnnouncements}}">
                        <h1>Edit Announcement</h1>
                        <form id="add-user-form">
                            <div class="form-group">
                                <label for="editTitle">Title</label>
                                <input id="editTitle" type="text" class="form-control announcement-title-input" name="AnnouncementsTitle" size="20" maxlength="70">
                                <div class="announce-limit-msg">Character limit reached</div>
                            </div>
                            <div class="form-group">
                                <label for="editMsg">Message</label>
                                <textarea id="editMsg" type="text" class="form-control" name="AnnouncementsMsg"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="editExpiry">How many days to display (1-30)</label>
                                <input id="editExpiry" type="number" min="1" max="30" value="7" class="form-control" name="AnnouncementsExpiry" size="8">
                                <div class="announce-error-msg">Please enter a value between 1 and 30</div>
                            </div>
                            <div>
                                <button type="submit" class="button2 buttonsmall" data-function="Announcements-edit">Edit announcement</button>
                                <button type="button" class="button1 buttonsmall" data-function="cancel-edit">cancel</button>
                            </div>
                        </form>
                    </div>

                    {{/if}}
                </div>

            </section>
        </div>
    </article>

</template>