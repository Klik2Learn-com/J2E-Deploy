[{"type":"js","data":"/* Imports for global scope */\n\nSession = Package.session.Session;\nMongo = Package.mongo.Mongo;\nRandom = Package.random.Random;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\nTemplate.body.addContent((function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"outer\"\n  }, HTML.Raw('\\n    <div class=\"logo\"></div>\\n    <h1 class=\"title\">Leaderboard</h1>\\n    <div class=\"subtitle\">Select a scientist to give them points</div>\\n    '), Spacebars.include(view.lookupTemplate(\"leaderboard\")), \"\\n  \");\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"leaderboard\");\nTemplate[\"leaderboard\"] = new Template(\"Template.leaderboard\", (function() {\n  var view = this;\n  return [ HTML.OL({\n    \"class\": \"leaderboard\"\n  }, \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"players\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"player\")), \"\\n    \" ];\n  }), \"\\n  \"), \"\\n\\n  \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"selectedName\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"details\"\n    }, \"\\n      \", HTML.DIV({\n      \"class\": \"name\"\n    }, Blaze.View(\"lookup:selectedName\", function() {\n      return Spacebars.mustache(view.lookup(\"selectedName\"));\n    })), \"\\n      \", HTML.BUTTON({\n      \"class\": \"inc\"\n    }, \"Add 5 points\"), \"\\n    \"), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      \"class\": \"message\"\n    }, \"Click a player to select\"), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"player\");\nTemplate[\"player\"] = new Template(\"Template.player\", (function() {\n  var view = this;\n  return HTML.LI({\n    \"class\": function() {\n      return [ \"player \", Spacebars.mustache(view.lookup(\"selected\")) ];\n    }\n  }, \"\\n    \", HTML.SPAN({\n    \"class\": \"name\"\n  }, Blaze.View(\"lookup:name\", function() {\n    return Spacebars.mustache(view.lookup(\"name\"));\n  })), \"\\n    \", HTML.SPAN({\n    \"class\": \"score\"\n  }, Blaze.View(\"lookup:score\", function() {\n    return Spacebars.mustache(view.lookup(\"score\"));\n  })), \"\\n  \");\n}));\n\n}).call(this);\n","servePath":"/template.leaderboard.js","sourceMap":null},{"type":"js","data":"(function(){// Set up a collection to contain player information. On the server,\n// it is backed by a MongoDB collection named \"players\".\n\nPlayers = new Mongo.Collection(\"players\");\n\nif (Meteor.isClient) {\n  Template.leaderboard.helpers({\n    players: function () {\n      return Players.find({}, { sort: { score: -1, name: 1 } });\n    },\n    selectedName: function () {\n      var player = Players.findOne(Session.get(\"selectedPlayer\"));\n      return player && player.name;\n    }\n  });\n\n  Template.leaderboard.events({\n    'click .inc': function () {\n      Players.update(Session.get(\"selectedPlayer\"), {$inc: {score: 5}});\n    }\n  });\n\n  Template.player.helpers({\n    selected: function () {\n      return Session.equals(\"selectedPlayer\", this._id) ? \"selected\" : '';\n    }\n  });\n\n  Template.player.events({\n    'click': function () {\n      Session.set(\"selectedPlayer\", this._id);\n    }\n  });\n}\n\n// On server startup, create some players if the database is empty.\nif (Meteor.isServer) {\n  Meteor.startup(function () {\n    if (Players.find().count() === 0) {\n      var names = [\"Ada Lovelace\", \"Grace Hopper\", \"Marie Curie\",\n                   \"Carl Friedrich Gauss\", \"Nikola Tesla\", \"Claude Shannon\"];\n      _.each(names, function (name) {\n        Players.insert({\n          name: name,\n          score: Math.floor(Random.fraction() * 10) * 5\n        });\n      });\n    }\n  });\n}\n\n}).call(this);\n","servePath":"/leaderboard.js","sourceMap":null}]